# Experimental!
I ~ "git: https://github.com/marcos-cat/iris"

‚îå‚îÄ‚ï¥Game
  ~ {
    Glyphs
    Score ‚Üê 0
    Œ± ‚Üê ‚àû
    œâ ‚Üê ‚àû
    N ‚Üê 30
  }

  ‚îå‚îÄ‚ï¥C
    W ‚Üê √∑‚ÇÇ‚ÇÖ‚ÇÖ [255 255 255]
    G ‚Üê √∑‚ÇÇ‚ÇÖ‚ÇÖ [149 208 105]
    B ‚Üê √∑‚ÇÇ‚ÇÖ‚ÇÖ [84 175 252]
    Y ‚Üê √∑‚ÇÇ‚ÇÖ‚ÇÖ [238 194 110]
    P ‚Üê √∑‚ÇÇ‚ÇÖ‚ÇÖ [203 106 231]
    O ‚Üê √∑‚ÇÇ‚ÇÖ‚ÇÖ [220 120 82]
    C ‚Üê √∑‚ÇÇ‚ÇÖ‚ÇÖ [32 249 252]
  ‚îî‚îÄ‚ï¥

  Gs ‚Üê " ‚äû‚àß‚äÉ‚ä°‚Üª‚ñΩ‚ßª‚çâ‚äì‚äôœÄ@"
  Cs ‚Üê C![W Y Y P B B B G G P Y O C]

  GridSize  ‚Üê 8_12
  Factor    ‚Üê 100
  LH        ‚Üê 4/5
  GlyphSize ‚Üê ‚ñ≥layout LineHeight: LH Factor@‚óå
  WorldSize ‚Üê √óGridSize GlyphSize

  ‚îå‚îÄ‚ï¥Text
    Size ‚Üê 40
    Char ‚Üê 23_40
    Pos  ‚Üê 30_30

    D ‚Üö I~Draw~Text ‚äôSize‚äôPos I~Draw~Background I~Color~Clear

    Œ± ‚Üê $ Welcome to Uiua Bejeweled
        $ Press space to start,
        $ reach 10000 points to win!

    DrawWelcome ‚Üê D Orange Œ±

    Œª ‚Üê $$ You lost :( You got _/10000
        $$ points! Press space to
        $$ restart or escape to exit.

    DrawGameOver ‚Üê D Red Œª

    œâ ‚Üê $$ You won! :) You got _ points!
        $$ You had _ moves left!
        $$ Press space to restart
        $$ or escape to exit.

    DrawWin ‚Üê D Green œâ

    Stats ‚Üê (
      $"Score: _\nSwaps: _" ‚äÉScore N
      ‚äÉ(D I~Color~Hex "#FFFFFF"
      | √óChar ‚äÇ‚äô2/‚Ü•‚äú‚ßª‚ä∏‚â†@\n
        I~Draw~Rect I~Color~Hex "#2F2F2F5F" ‚äô(-4_0 Pos)
      )
    )
  ‚îî‚îÄ‚ï¥

  Gen ‚Üê ‚åä‚çú-‚ÇÅ√ó‚ßªGs gen GridSize

  Œ∫ ‚Üê √ó3e2‚äì‚ßª‚ñ°‚äÉ‚äö‚ñΩ√ó‚àäA‚ÇÇ‚ä∏‚â°(‚äÉ‚ä¢/‚âç‚ßà-‚çÜ)‚ßÖ‚ÇÉ>
  œÉ ‚Üê :‚äì/‚óá+(‚çú‚ä°‚â°‚ãÖ0‚ó¥/‚äÇ/‚óá‚äÇ)‚äúŒ∫‚ä∏¬∞Àú‚ä°
  S ‚Üê ‚çúScore+ ‚çúGlyphs œÉ

  Œ¥ ‚Üö ‚ç•(‚®¨‚óå‚çú‚ä°‚â°‚áå¬±‚ä∏‚ßª ‚äú‚àò ¬∞Àú‚ä°‚ä∏‚¶∑[¬§W¬§0])‚àû
  G ‚Üê ‚çúGlyphs Œ¥

  œÜ ‚Üö +√óGen‚öÇ‚ä∏=‚ÇÄ
  F ‚Üê ‚çúGlyphs œÜ

  Slot ‚Üê ‚®¨‚çúœâ‚óå‚çúŒ±‚óå‚âç‚àû‚ä∏Œ± : ‚åä√∑GlyphSize ‚äü¬∞Àú‚ÑÇ

  I~Open ‚áåWorldSize "Bejeweled"
  ¬∞I~Screen~FPS 10

  Render ‚Üê ‚ç•‚ÇÇ/‚â°‚äÇ ‚â°‚â°(layout Color: LineHeight: LH)‚äôFactor ‚à©‚åû‚äè‚äôCs‚äôGs Game~Glyphs

  ùì£ ‚Üê I~Texture~LoadImage ‚ÜØ‚äÇWorldSize 4 0

  DrawGlyphs ‚Üê I~Texture~DrawScreen ¬∞‚ä∏I~Texture~Image Render ‚äôùì£

  DrawSelected ‚Üê ‚äÉ(
    I~Draw~Rect ‚äÇ‚äô0.2 Blue ‚à©‚áå‚üú√óGlyphSize Œ±
  | I~Draw~Rect ‚äÇ‚äô0.2 Orange ‚à©‚áå‚üú√óGlyphSize œâ
  )

  ‚îå‚îÄ‚ï¥State
    |Begin
    |Waiting
    |Swapping
    |Scoring
    |GameOver
    |Winning
  ‚îî‚îÄ‚ï¥

  Restart! ‚Üê ‚®¨^0(State~Waiting New Gen‚ãÖ‚öÇ) I~Key~Pressed @\s

  Step ‚Üê ‚®¨(
    Text~DrawWelcome
    ‚®¨State~Begin State~Waiting ‚àä‚äô@\s I~Key~Typed
  | I~Mouse!Pressed‚ÄºLeft Slot
    ‚®¨State~Waiting State~Swapping √ó‚à©(¬¨‚âç‚àû)‚ä∏‚äÉŒ± œâ
    ‚äô‚ä∏DrawGlyphs
    ‚äô‚ä∏DrawSelected
    ‚äô‚ä∏Text~Stats
  | ‚®¨(State~Waiting ‚óå
    | ‚âç‚§ö‚à©Glyphs‚ä∏(F G S)‚ä∏(‚çú‚äôGlyphs‚çú‚ä°‚áå ‚äô‚çúN-‚ÇÅ)
      ‚®¨(State~Scoring ‚àò|State~Waiting ‚ãÖ‚àò)
    )‚àäA‚ÇÇ‚äÉ-‚äü‚äÉ(Œ±|œâ|‚çúœâ‚ãÖ‚àû‚çúŒ±‚ãÖ‚àû)
    ‚äô‚ä∏DrawGlyphs
    ‚äô‚ä∏Text~Stats
  | ‚®¨(State~Winning
    | ‚®¨(State~GameOver
      | ‚®¨(State~Scoring
        | State~Waiting
        )‚§ö‚âç‚ä∏(F G S)
      )>‚ÇÄ‚ä∏N
    )<1e4‚ä∏Score
    ‚äô‚ä∏DrawGlyphs
    ‚äô‚ä∏Text~Stats
  | Text~DrawGameOver‚ä∏Score
    Restart!State~GameOver
  | Text~DrawWin‚ä∏‚äÉScore N
    Restart!State~Winning
  )

  State~Begin ‚ç•(F ‚äìG‚óå ‚çúGlyphs œÉ)‚àû New Gen‚öÇ
  ‚óå‚óåI~Loop!Step
‚îî‚îÄ‚ï¥
